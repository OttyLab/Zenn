---
title: "Mapbox Maps SDK Flutter Pluginã‚’ä½¿ã£ã¦ã¿ã‚‹"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Mapbox", "Flutter", "GIS"]
published: true
publication_name: "mapbox_japan"
---

# ã¯ã˜ã‚ã«

[Mapbox](https://www.mapbox.com/)ã¯JavaScriptã®SDKã§ã‚ã‚‹[Mapbox GL JS](https://docs.mapbox.com/mapbox-gl-js/guides/)ã®ä»–ã«ãƒ¢ãƒã‚¤ãƒ«å‘ã‘SDKã§ã‚ã‚‹[Mapbox Maps SDK for Android](https://docs.mapbox.com/android/maps/guides/)ã€[Maps SDK for iOS](https://docs.mapbox.com/ios/maps/guides/)ã‚‚æä¾›ã—ã¦ãŠã‚Šã€æ§˜ã€…ãªãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§åŒã˜ä½“é¨“ã®åœ°å›³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã—ã¦ãã‚Œã‚‰ã«åŠ ãˆã¦Flutterç”¨ã®SDKã§ã‚ã‚‹[Mapbox Maps SDK Flutter Plugin](https://pub.dev/packages/mapbox_maps_flutter)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ã“ã®è¨˜äº‹ã§ã¯ã“ã®Flutterç”¨ã®SDKã®ä½¿ã„æ–¹ã‚’ç°¡å˜ã«è¦‹ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

# Mapbox Maps SDK Flutter Pluginã¨ã¯

## èƒŒæ™¯

Flutterã§Mapboxã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦[Flutter Mapbox GL](https://pub.dev/packages/mapbox_gl)ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯Maps SDK for Android v9ãŠã‚ˆã³Mapbox SDK for iOS v6ã‚’å†…åŒ…ã—ã€ãƒ¡ã‚½ãƒƒãƒ‰ãƒãƒ£ãƒãƒ«çµŒç”±ã§ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹SDKã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚å½“åˆMapboxãŒé–‹ç™ºã—ã¦ã„ã¾ã—ãŸãŒã€é€”ä¸­ã‹ã‚‰ã‚³ãƒŸãƒ¥ãƒ†ã‚£ã‚µãƒãƒ¼ãƒˆã¨ãªã‚Šã¾ã—ãŸã€‚ç©æ¥µçš„ãªé–‹ç™ºãŒç¶šã‘ã‚‰ã‚Œã¾ã™ãŒã€Mapbox Maps SDK for Android/iOS v10ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ãã“ã§ã€Mapboxã¯æ–°ãŸã«Mapbox Maps SDK for Android/iOS v10ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹SDKã¨ã—ã¦Mapbox Maps SDK Flutter Pluginã®é–‹ç™ºã«ç€æ‰‹ã—ã¾ã—ãŸã€‚Mapbox Maps SDK Flutter Pluginã¯Flutter Mapbox GLåŒæ§˜ã«Mapbox Maps SDK for Android/iOSã‚’å†…åŒ…ã—ã€ãƒ¡ã‚½ãƒƒãƒ‰ãƒãƒ£ãƒãƒ«çµŒç”±ã§ãã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹æ§‹é€ ã¨ãªã‚Šã¾ã™ã€‚ã™ã§ã«åŸºæœ¬çš„ãªæ©Ÿèƒ½ã¯å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€Mapbox Maps SDK for Android/iOSã¨ä¼¼ãŸä½¿ç”¨æ„Ÿã§åœ°å›³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹æˆã§ãã¾ã™ã€‚

### å¯„ã‚Šé“ - SDKã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
Mapboxã®SDKã¯å¤§ããåˆ†ã‘ã¦ä»¥ä¸‹ã®2ä¸–ä»£ã«åˆ†é¡ã§ãã¾ã™ã€‚

1. Mapbox GL JS v1ã¨åŒä¸–ä»£
  - Mapbox Maps SDK for Android v9
  - Mapbox Maps SDK for iOS v6

2. Mapbox GL JS v2ã¨åŒä¸–ä»£
  - Mapbox Maps SDK for Android v10
  - Mapbox Maps SDK for iOS v10

1.ã¯ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒBSDã€2.ã¯[ToS](https://www.mapbox.com/legal/tos)ã¨ãªã‚Šã€ä½¿ç”¨æ¡ä»¶ãŒç•°ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«ä¼´ã„ã€v2ã§ã¯ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®šãŒå¿…é ˆã«ãªã‚Šã¾ã—ãŸã€‚ã¾ãŸã€2.ã§ã¯æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆç©ºã®è¡¨ç¾ï¼‰ã€è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚µãƒãƒ¼ãƒˆç­‰ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

Mapbox Maps SDK Flutter Pluginã¯Mapbox Maps SDK for Android/iOS v10ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰2.ã®ä¸–ä»£ã¨ãªã‚Šã¾ã™ã€‚

## æ³¨æ„äº‹é …

Mapbox Maps SDK Flutter Pluginã¯ç¾åœ¨ãƒ™ãƒ¼ã‚¿ç‰ˆã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šå¾Œã€äºˆå‘ŠãªãAPIã®å¤‰æ›´ç­‰ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ä½¿ã„æ–¹ç­‰ã«é–¢ã—ã¦ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚µãƒãƒ¼ãƒˆã«ãŠå•ã„åˆã‚ã›ã„ãŸã ã„ã¦ã‚‚ã”å›ç­”ã§ãã¾ã›ã‚“ã€‚


# ä½¿ã£ã¦ã¿ã‚‹

ãã‚Œã§ã¯æ—©é€ŸSDKã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼

## æº–å‚™
### Flutterã®é–‹ç™ºç’°å¢ƒã‚’ä½œæˆ
[å…¬å¼ã‚µã‚¤ãƒˆ](https://docs.flutter.dev/get-started/install)ã‚’å‚è€ƒã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚ç§ã¯Android Studioã«Flutterãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆ
Mapbox Maps SDK Flutter PluginãŒå†…éƒ¨çš„ã«ä½¿ç”¨ã™ã‚‹Maps SDK for Android/iOSã®ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã«ã‚ãŸã‚Šã€Mapboxã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŠã‚ˆã³ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

1. Mapboxã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹
2. https://account.mapbox.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
3. Tokensã‚’é¸æŠ
4. ã€ŒCreate a tokenã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. Nameã«ä»»æ„ã®åå‰ã‚’å…¥åŠ›
6. Public scopesã®ãƒã‚§ãƒƒã‚¯ã‚’ã™ã¹ã¦å¤–ã—ã€Secret Scopesã®ã€ŒDOWNLOADS:READã€ã®ã¿ã‚’é¸æŠ
7. ã€ŒCreate tokenã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
8. ãƒˆãƒ¼ã‚¯ãƒ³ä¸€è¦§ç”»é¢ã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒ”ãƒ¼ã—ã¦å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜

Secret Scopesã‚’å«ã‚€ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€Œã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã€ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é–¢ã™ã‚‹æ“ä½œã‚’è¨±å¯ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚ã‚‹ãŸã‚ã€å¤–éƒ¨ã«å…¬é–‹ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ã¾ãŸã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€Œsk.ã€ã§å§‹ã¾ã‚‹æ–‡å­—åˆ—ã¨ãªã‚‹ãŸã‚ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆã€Œpk.ã§å§‹ã¾ã‚‹ã€ï¼‰ã¨åŒºåˆ¥ã§ãã¾ã™ã€‚

ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã¯ä½œæˆç›´å¾Œã«ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„ã®ã§ã€ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç¢ºå®Ÿã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚

### ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®š
### Mapbox Maps SDK for Android
[Mapbox SDK for Androidã®Installaion](https://docs.mapbox.com/android/maps/guides/install/)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹é€šã‚Šã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯`~/.gradle/gradle.properties`ã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ ã—ã¾ã™ã€‚

```shell
MAPBOX_DOWNLOADS_TOKEN=YOUR_SECRET_MAPBOX_ACCESS_TOKEN
```

### Mapbox Maps SDK for iOS
[Mapbox SDK for iOSã®Installaion](https://docs.mapbox.com/ios/maps/guides/install/)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹é€šã‚Šã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯`~/.netrc`ã«ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```shell
machine api.mapbox.com
login mapbox
password YOUR_SECRET_MAPBOX_ACCESS_TOKEN
```

## Mapbox Maps SDK Flutter Pluginã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```
% flutter pub add mapbox_maps_flutter
```

## Androidã®è¨­å®š

`/android/app/build.gradle`ã®`minSdkVersion`ã‚’`21`ã«å¤‰æ›´ã—ã¾ã™ã€‚

## åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹

`MapWidget`ãŒåœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹Widgetã§ã™ã€‚`resourceOptions`ã®è¨­å®šãŒå¿…é ˆã§ã™ã€‚ã“ã“ã§ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚

```Dart
import 'package:flutter/material.dart';
import 'package:mapbox_maps_flutter/mapbox_maps_flutter.dart';

void main() {
  runApp(const MapboxSample());
}

class MapboxSample extends StatelessWidget {
  const MapboxSample({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Mapbox Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MapPage(),
    );
  }
}

class MapPage extends StatefulWidget {
  const MapPage({super.key});
  @override
  State<MapPage> createState() => _MapPageState();
}

class _MapPageState extends State<MapPage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: MapWidget(
        resourceOptions: ResourceOptions(accessToken: YOUR_MAPBOX_PUBLIC_ACCESS_TOKEN),
      )
    );
  }
}
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

![MapWidget](/images/articles/d9ba57ca498170/flutter.png)

### 2024/05/11 æ›´æ–°

2024å¹´3æœˆ1æ—¥ã«v1.0.0ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã«ä¼´ã„ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®šæ–¹æ³•ãŒä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚

1. `main()`ã«ä»¥ä¸‹ã‚’è¿½åŠ 
```Dart
WidgetsFlutterBinding.ensureInitialized();
MapboxOptions.setAccessToken(YOUR_MAPBOX_PUBLIC_ACCESS_TOKEN);
```
2. `MapWidget`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ™‚ã«æŒ‡å®šã—ã¦ã„ãŸ`resourceOptions`ã‚’å‰Šé™¤

ã‚³ãƒ¼ãƒ‰å…¨ä½“ã§ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

```Dart
import 'package:flutter/material.dart';
import 'package:mapbox_maps_flutter/mapbox_maps_flutter.dart';

void main() {
  WidgetsFlutterBinding.ensureInitialized();
  MapboxOptions.setAccessToken(YOUR_MAPBOX_PUBLIC_ACCESS_TOKEN);
  runApp(const MapboxSample());
}

class MapboxSample extends StatelessWidget {
  const MapboxSample({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Mapbox Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MapPage(),
    );
  }
}

class MapPage extends StatefulWidget {
  const MapPage({super.key});
  @override
  State<MapPage> createState() => _MapPageState();
}

class _MapPageState extends State<MapPage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
        body: MapWidget()
    );
  }
}
```


# è¨˜äº‹ä¸€è¦§

ä»¥ä¸‹ã®è¨˜äº‹ã‚‚ãœã²ã”å‚ç…§ãã ã•ã„ã€‚

https://zenn.dev/ottylab/articles/48bc1a0b1acde2/
https://zenn.dev/ottylab/articles/8d206839a11067/