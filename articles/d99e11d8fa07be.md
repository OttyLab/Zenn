---
title: "MapTilerã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½“é¨“ã™ã‚‹"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["MapTiler", "GIS", "JavaScript"]
published: false
publication_name: "mapbox_japan"
---

# ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã§ã¯[MapTiler](https://www.maptiler.com/)ã«ãŠã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®æŒ™å‹•ã‚’ç¢ºèªã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯[MapTiler SDK JS](https://docs.maptiler.com/sdk-js/)ã‚’ä½¿ã£ã¦åœ°å›³ã‚’è¡¨ç¤ºã—ã€ã©ã®ã‚ˆã†ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½¿ã†ã®ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚

MapTilerã®JavaScriptã®SDKã¯ã‚‚ã¨ã‚‚ã¨Mapbox GL JSã‚’ãƒ™ãƒ¼ã‚¹ã«é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ã€‚ã—ã‹ã—ã€ç¾åœ¨ã¯[MapLibre GL JSã‚’ãƒ™ãƒ¼ã‚¹ã«é–‹ç™º](https://github.com/maptiler/maptiler-sdk-js)ã•ã‚Œã¦ã„ã¾ã™ã€‚[MapLibre](https://github.com/maplibre/maplibre-gl-js)è‡ªä½“ãŒMapbox GL JSã®v1ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ä½œã‚‰ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ã€ã„ãšã‚Œã«ã›ã‚ˆMapbox GL JSã¨ä¼¼ãŸãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚[Examples](https://docs.maptiler.com/sdk-js/examples/)ã®ä¸­ã«[Mapbox GL JSã®Examples](https://docs.mapbox.com/mapbox-gl-js/example/)ã¨åŒã˜ã‚‚ã®ãŒã‚ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã€ãã®ã“ã¨ãŒä¼ºãˆã¾ã™ã€‚


# åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹
ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®[How to use the MapTiler SDK JS](https://docs.maptiler.com/sdk-js/examples/how-to-use/)ã‚’å‚è€ƒã«ã¾ãšã¯åœ°å›³ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```html
<link href="https://cdn.maptiler.com/maptiler-sdk-js/latest/maptiler-sdk.css" rel="stylesheet" />
<script src="https://cdn.maptiler.com/maptiler-sdk-js/latest/maptiler-sdk.umd.min.js"></script>
```

CSSã‚’è¨­å®šã—ã¾ã™ã€‚

```html
<style>
  body { margin: 0; padding: 0; }
  #map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
```

æ¬¡ã«åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ã‚’ä½œã‚Šã¾ã™ã€‚

```html
<div id="map"></div>
```

JavaScriptã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚åå‰ç©ºé–“ãŒ`mapboxgl`ã‹ã‚‰`maptilersdk`ã«å¤‰ã‚ã£ãŸã“ã¨ã€APIã‚­ãƒ¼ã®è¨­å®šæ–¹æ³•ãŒè‹¥å¹²å¤‰ã‚ã£ãŸã“ã¨ä»¥å¤–ã¯Mapbox GL JSã¨åŒã˜ã§ã™ã­ã€‚å¿µã®ç‚ºã«èª¬æ˜ã™ã‚‹ã¨ã€`Map`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹éš›ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¾ã™ã€‚`container`ã¯HTMLã§ä½œæˆã—ãŸåœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®IDã‚’æŒ‡å®šã—ã¾ã™ã€‚ã‚ã¨ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã€ä¸­å¿ƒåº§æ¨™ã€ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

```JavaScript
maptilersdk.config.apiKey = YOUR_API_KEY_HERE;

const map = new maptilersdk.Map({
  container: 'map',
  style: maptilersdk.MapStyle.STREETS,
  center: [16.62662018, 49.2125578],
  zoom: 14
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/VwEjWZw)


# ã‚½ãƒ¼ã‚¹ + ãƒ¬ã‚¤ãƒ¤ãƒ¼ = ã‚¹ã‚¿ã‚¤ãƒ«

Mapbox GL JSã¨ãƒ™ãƒ¼ã‚¹ãŒåŒã˜ã¨ã„ã†ã“ã¨ã§ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®è€ƒãˆæ–¹ã‚‚å…¨ãåŒã˜ã§ã™ã€‚[Mapbox GL JSã®è¨˜äº‹](https://zenn.dev/ottylab/articles/28e581db08ca16/)ã¨åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®JavaScriptã®ã‚³ãƒ¼ãƒ‰ã¯JSONã§ç›´æ¥ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚é“è·¯ãŒæç”»ã•ã‚Œã¾ã™ã€‚

```JavaScript
const map = new maptilersdk.Map({
  container: 'map',
  style: {
    "version": 8,
    "name": "Simple Style",
    "sources": {
      streets: {
        type: "vector",
        url: "https://api.maptiler.com/tiles/v3/tiles.json"
      }
    },
    "layers": [{
      id: "road",
      type: "line",
      source: "streets",
      "source-layer": "transportation",
      paint: {
        "line-color": "#00ff00",
        "line-width": 3,
      }
    }]
  },
  center: [16.62662018, 49.2125578],
  zoom: 14
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/ExdyXvB)


# MapTiler Cloudã«ã‚ˆã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®ç·¨é›†

Mapbox Studioã§è¡Œã£ãŸã‚ˆã†ãªã‚¹ã‚¿ã‚¤ãƒ«ã®ç·¨é›†ã‚’MapTiler Cloudã§ã‚‚ã§ãã¾ã™ã€‚

Mapsã‚’é¸ã³ã€NEW MAPã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![MapTiler Cloud](/images/articles/d99e11d8fa07be/maptiler_cloud_00.png)

ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ãã®ã§ã€ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹åœ°å›³ã‚’é¸æŠã—ã€CUSTOMIZEã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™

![ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ—é¸æŠ](/images/articles/d99e11d8fa07be/maptiler_cloud_01.png)

Roadsã‚’é¸æŠã—ã€è‰²ã‚’èµ¤è‰²ã«è¨­å®šã—ã¾ã™ã€‚ç·¨é›†ãŒå®Œäº†ã—ãŸã‚‰SAVEã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚åå‰ã‚’æŒ‡å®šã—ã¦ä¿å­˜ã—ã¾ã™ã€‚

![ç·¨é›†](/images/articles/d99e11d8fa07be/maptiler_cloud_02.png)

ã¾ãŸã€ADVANCED EDITTINGã‚’ä½¿ç”¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ã‚ˆã‚Šè©³ç´°ãªè¨­å®šãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

![Advanced Editting](/images/articles/d99e11d8fa07be/maptiler_cloud_03.png)

Mapsã®ç”»é¢ã«æˆ»ã‚‹ã¨å…ˆã»ã©ä½œæˆã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒMy Mapsã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ãã¨Use vector styleã¨ã„ã†å ´æ‰€ã«URLãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã§ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ãã®URLã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«`style`ã«æŒ‡å®šã—ã¾ã™ã€‚

```JavaScript
const map = new maptilersdk.Map({
  container: 'map',
  style: 'https://api.maptiler.com/maps/eb3ae3a8-53c9-4fe4-bd5a-acd0741b46d0/style.json?key=YOUR_API_KEY_HERE',
  center: [16.62662018, 49.2125578],
  zoom: 14
});

```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/bGmerEm)

# ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«å¤‰æ›´

Mapbox GL JSã¨åŒæ§˜ã«åœ°å›³ã‚’è¡¨ç¤ºã—ãŸå¾Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚Examplesã®ä¸­ã®[How to display a style switcher control](https://docs.maptiler.com/sdk-js/examples/control-style-switcher/)ãŒã‚ã‹ã‚Šã‚„ã™ã„ã®ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã“ã®Exampleã¯Mapbox GL JSã‚ˆã‚Šã‚‚å‡ã£ãŸã“ã¨ã‚’ã—ã¦ã„ã¦ã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠã™ã‚‹UIã‚’ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆ`layerSwitcherControl`ï¼‰ã¨ã—ã¦ä½œæˆã—ã¦ã„ã¾ã™ã€‚

ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯`onAdd`ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆãªã®ã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å°‘ã—é•·ã„å‡¦ç†ã§ã™ãŒã€é‡è¦ãªã®ã¯ã€Œã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ã€ã®ä¸­ã§ã€Œã‚¹ã‚¿ã‚¤ãƒ«ã®è¨­å®šã€ã‚’ã—ã¦ã„ã‚‹éƒ¨åˆ†ã§ã™ã€‚ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯[`Map#setStyle`](https://docs.maptiler.com/sdk-js/api/map/#map#setstyle)ãªã®ã§ã€ã“ã‚Œã‚‚Mapbox GL JSã¨åŒã˜ã§ã™ã­ã€‚å¼•æ•°ã«ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„URLã‚’æŒ‡å®šã—ã¾ã™ã€‚[ã‚¹ã‚¿ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ](https://docs.maptiler.com/sdk-js/api/map-styles/#mapstylelist)ã¯Mapbox GL JSã«ã¯å­˜åœ¨ã—ãªã„æ¦‚å¿µã§ã™ãŒã€Streetsã«å¯¾ã—ã¦Dark/Lightã®ã‚ˆã†ã«ãƒãƒªã‚¢ãƒ³ãƒˆãŒè¨­å®šã™ã‚‹ã¨ã„ã£ãŸæŸ”è»Ÿãªä»•çµ„ã¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚

```JavaScript
  onAdd(map) {
    this._map = map;
    const basemaps = this._options.basemaps;
    Object.keys(basemaps).forEach((layerId) => {
      const base = basemaps[layerId];
      const basemapContainer = document.createElement("img");
      basemapContainer.src = base.img;
      basemapContainer.classList.add("basemap");
      basemapContainer.dataset.id = layerId;
      basemapContainer.addEventListener("click", () => { //ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
        const activeElement = this._container.querySelector(".active");
        activeElement.classList.remove("active");
        basemapContainer.classList.add("active");
        map.setStyle(maptilersdk.MapStyle[layerId]); //ã‚¹ã‚¿ã‚¤ãƒ«ã®è¨­å®š
      });
      basemapContainer.classList.add("hidden");
      this._container.appendChild(basemapContainer);
      if (this._options.initialBasemap.id === layerId) {
          basemapContainer.classList.add("active");
      }
    });
    return this._container;
  }
```

ã“ã“ã§ã¯`layerId`ã«ä»¥ä¸‹ã®`baseMaps`ã®ã‚­ãƒ¼ã®å€¤ï¼ˆ`STREETS`ï¼‰ç­‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€`maptilersdk.MapStyle[layerId]`ã¯`maptilersdk.MapStyle.STREETS`ã®ã‚ˆã†ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

```JavaScript
const baseMaps = {
  "STREETS": {
    img: "https://cloud.maptiler.com/static/img/maps/streets.png"
  },
  "WINTER": {
    img: "https://cloud.maptiler.com/static/img/maps/winter.png"
  },
  "HYBRID": {
    img: "https://cloud.maptiler.com/static/img/maps/hybrid.png"
  }
}
```

# ã¾ã¨ã‚

MapTilerã¯ã‚‚ã¨ã‚‚ã¨Mapbox GL JSã‚’ä½¿ã£ã¦ã„ãŸã“ã¨ã‹ã‚‰ã‚‚ã€Mapboxã¨ã¨ã¦ã‚‚äº’æ›æ€§ã®é«˜ã„ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã‚¹ã‚¿ã‚¤ãƒ«ã®ä½¿ã„æ–¹ã‚‚åŒã˜ã§ã€è¿·ã†ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
