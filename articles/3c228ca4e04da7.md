---
title: "Mapbox Newsletter WEEKLY TIPSã®è§£èª¬ -ã€Œå‹•ç”»ã‚’è¿½åŠ ã€"
emoji: "ğŸ“¹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Mapbox", "MapboxGLJS", "GIS", "JavaScript"]
published: false
publication_name: "mapbox_japan"
---

# ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã¯ã€å…ˆæ—¥é…ä¿¡ã•ã‚ŒãŸMapbox Newsletterã®WEEKLY TIPSã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸã€Œå‹•ç”»ã‚’è¿½åŠ ã€ã«ã¤ã„ã¦ã®è§£èª¬ã§ã™ã€‚ã¾ãŸã€Newsletterã®è³¼èª­ã¯[ã“ã¡ã‚‰](https://www.mapbox.jp/blog?#:~:text=%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%83%AC%E3%82%BF%E3%83%BC%E3%82%92%E8%B3%BC%E8%AA%AD)ã‹ã‚‰ãŠç”³ã—è¾¼ã¿ã„ãŸã ã‘ã¾ã™ã€‚


# ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª

ã¾ãšExamplesã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã«è¡Œãã¾ã—ã‚‡ã†ã€‚

æ—¥æœ¬èªã‚µã‚¤ãƒˆ
@[card](https://docs.mapbox.com/jp/mapbox-gl-js/example/video-on-a-map/)

è‹±èªã‚µã‚¤ãƒˆ
@[card](https://docs.mapbox.com/mapbox-gl-js/example/video-on-a-map/)

ã‚¿ã‚¤ãƒˆãƒ«ãŒæ—¥æœ¬èªãƒ»è‹±èªä»¥å¤–ã¯åŒã˜ãªã®ã§ä»Šå›ã¯ã©ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ã‚‚OKã§ã™ã€‚

## HTML/CSS

ã¾ãšHTMLã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã¯åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã§ã™ã€‚

```HTML
<div id="map"></div>
```

## Mapã®ä½œæˆ

æ¬¡ã«JavaScriptã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚`const videoStyle`ã¯å¾Œå›ã—ã«ã—ã¾ã™ã€‚ãã®å…ˆã®ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã„ã¤ã‚‚é€šã‚Šã€Mapã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚`container`ã§åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹HTMLã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®idã‚’æŒ‡å®šã—ã¾ã™ã€‚

```JavaScript
const map = new mapboxgl.Map({
  container: 'map',
  minZoom: 14,
  zoom: 17,
  center: [-122.514426, 37.562984],
  bearing: -96,
  style: videoStyle
});
```

ã•ã¦ã€ã„ã¤ã‚‚ã¨ã®é•ã„ã¯`sytle`ã«URLã§ã¯ãªã`videoStyle`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¦ã„ã‚‹ç‚¹ã§ã™ã€‚å®Ÿã¯`options.style`ã¯URLã®ä»–ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å–ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.mapbox.com/mapbox-gl-js/api/map/#map-parameters:~:text=options.style)ã«ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

> The map's Mapbox style. This must be an a JSON object conforming to the schema described in the Mapbox Style Specification , or a URL to such JSON. 

ã¨ã„ã†ã“ã¨ã§ã€ä»Šå›ã¯[Style Spec](https://docs.mapbox.com/mapbox-gl-js/style-spec/)ã«æº–æ‹ ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥è¨˜è¿°ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚¹ã‚¿ã‚¤ãƒ«ã§æœ€ä½é™å¿…è¦ãªã®ã¯ã€ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ã‚½ãƒ¼ã‚¹ã¨ãã®ã‚½ãƒ¼ã‚¹ã‚’å…ƒã«å®šç¾©ã•ã‚ŒãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚

ã¾ãšã€ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ã‚½ãƒ¼ã‚¹ã‚’ï¼’ã¤æº–å‚™ã—ã¦ã„ã¾ã™ã€‚ï¼‘ã¤ç›®ãŒ`satellite`ã§ã€MapboxãŒæä¾›ã™ã‚‹[`mapbox.satellite`ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆ](https://docs.mapbox.com/data/tilesets/reference/mapbox-satellite/)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆã¯`raster`ãªã®ã§[raster sourceã®ã‚¹ãƒšãƒƒã‚¯](https://docs.mapbox.com/mapbox-gl-js/style-spec/sources/#raster)ã«ã—ãŸãŒã£ãŸè¨˜è¿°ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ï¼’ã¤ç›®ã®`video`ã¯[`urls`ã¨`coordinates`ãŒå¿…é ˆ](https://docs.mapbox.com/mapbox-gl-js/style-spec/sources/#video)ã®ã‚½ãƒ¼ã‚¹ã§ã™ã€‚`coordinates`ã§æŒ‡å®šã—ãŸå››è§’å½¢ã«å‹•ç”»ã‚’ã¯ã‚è¾¼ã‚€å½¢ã«ãªã‚Šã¾ã™ã€‚`coordinates`ã¯æ™‚è¨ˆå›ã‚Šã«å·¦ä¸Šã€å³ä¸Šã€å³ä¸‹ã€å·¦ä¸‹ã®é †ã«åº§æ¨™ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```JavaScript
'sources': {
  'satellite': {
    'type': 'raster',
    'url': 'mapbox://mapbox.satellite',
    'tileSize': 256
  },
  'video': {
    'type': 'video',
    'urls': [
      'https://static-assets.mapbox.com/mapbox-gl-js/drone.mp4',
      'https://static-assets.mapbox.com/mapbox-gl-js/drone.webm'
    ],
    'coordinates': [
      [-122.51596391201019, 37.56238816766053],
      [-122.51467645168304, 37.56410183312965],
      [-122.51309394836426, 37.563391708549425],
      [-122.51423120498657, 37.56161849366671]
    ]
  }
},
```

æ¬¡ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¦‹ã¾ã™ã€‚ã“ã“ã§ã¯ï¼“ã¤ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ï¼‘ã¤ç›®ã¯[`background`](https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#background)ã§ã™ã€‚åå‰ã®é€šã‚ŠèƒŒæ™¯è‰²ã‚„ç”»åƒã‚’æŒ‡å®šã™ã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚ä»Šå›ã¯ï¼’ã¤ç›®ã®`satellite`ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§è¦†ã‚ã‚Œã‚‹ã®ã§åŸºæœ¬çš„ã«è¦‹ãˆã¾ã›ã‚“ãŒã€`satellite`ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ç›´å‰ã«ä¸€ç¬è¦‹ãˆã‚‹åœ°ã®è‰²ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ï¼’ã¤ç›®ã®`satellite`ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã‚½ãƒ¼ã‚¹ã‚’`satellite`ã¨ã™ã‚‹ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚ï¼“ã¤ç›®ãŒ`video`ã‚’ã‚½ãƒ¼ã‚¹ã¨ã™ã‚‹ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚

```JavaScript
'layers': [
  {
    'id': 'background',
    'type': 'background',
    'paint': {
      'background-color': 'rgb(4,7,14)'
    }
  },
  {
    'id': 'satellite',
    'type': 'raster',
    'source': 'satellite'
  },
  {
    'id': 'video',
    'type': 'raster',
    'source': 'video'
  }
]
```

ã¤ã¾ã‚Šã€å‹•ç”»ã¯`raster`ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦æç”»ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã¾ãŸã€ãã®éš›ã«ä½¿ç”¨ã™ã‚‹å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚„è¡¨ç¤ºã™ã‚‹åº§æ¨™ä½ç½®ã¯`video`ã‚½ãƒ¼ã‚¹ã§æŒ‡å®šã—ã¾ã™ã€‚

## ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
åœ°å›³ä¸Šã®ä»»æ„ã®ç‚¹ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸéš›ã«å‹•ç”»ã‚’åœæ­¢ã€å†ç”Ÿã™ã‚‹å‡¦ç†ã§ã™ã€‚[`VideoSource`ã‚¯ãƒ©ã‚¹](https://docs.mapbox.com/mapbox-gl-js/api/sources/#videosource)ã«ã¯`play`ãŠã‚ˆã³`pause`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆæ™‚ã«ã“ã‚Œã‚‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¨ãªã£ã¦ã„ã¾ã™ã€‚

```JavaScript
let playingVideo = true;
 
map.on('click', () => {
  playingVideo = !playingVideo;
   
  if (playingVideo) {
    map.getSource('video').play();
  } else {
    map.getSource('video').pause();
  }
});
```


# å®Ÿé¨“

ç‰¹ã«ã€Œã‚¹ã‚¿ã‚¤ãƒ«ã¨ã—ã¦ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ ã—ãªã„ã¨ã„ã‘ãªã„ã€ã¨ã„ã†åˆ¶ç´„ã¯ãªã„ã®ã§ã€`Map`ã®`load`ã‚¤ãƒ™ãƒ³ãƒˆã§`addSource`ã€`addLayer`ã‚’ä½¿ã£ã¦å‹•ç”»ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚ã“ã“ã§ã¯ä»¥ä¸‹ã®å‹•ç”»ã‚’ä½¿ç”¨ã—ã€æ±äº¬é§…ã®é§…èˆã‚ãŸã‚Šã®å°å½¢é ˜åŸŸã«å‹•ç”»ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚


https://www.pexels.com/ja-jp/video/855282/

Mapã®ä½œæˆã¯ã„ã¤ã‚‚é€šã‚Šã§ã™ã€‚ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½¿ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ã„ã†åˆ¶ç´„ã‚‚ãªã„ã®ã§ã€Mapbox Light v11ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```JavaScript
const map = new mapboxgl.Map({
  container: "map",
  style: "mapbox://styles/mapbox/light-v11",
  zoom: 15,
  center: [139.763906, 35.6811649]
});
```

`load`ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚`addSource`ãŠã‚ˆã³`addLayer`ã§æŒ‡å®šã™ã‚‹é …ç›®ã¯ã‚µãƒ³ãƒ—ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§æŒ‡å®šã—ãŸã‚‚ã®ã¨åŒã˜ã§ã™ã€‚

```JavaScript
map.on("load", () => {
  map.addSource("source", {
    type: "video",
    urls: [
      "https://player.vimeo.com/progressive_redirect/download/204437641/container/e3021c36-fb23-4d62-a30a-6a402a3a992d/f2000a68/little_kitten_playing_his_toy_mouse%20%28360p%29.mp4?expires=1688046038&loc=external&oauth2_token_id=57447761&signature=bfc144ffa6ac029f70a0f8f96c29a2329ab0ecae76f847e2bf19330a5dcae117"
    ],
    coordinates: [
      [139.76591373007977, 35.68194904016656],
      [139.7682164472434, 35.68294045983515],
      [139.76659322039075, 35.678739617787556],
      [139.76528457238538, 35.68048744025002]
    ]
  });

  map.addLayer({
    id: "layer",
    type: "raster",
    source: "source"
  });
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/JjeWymN)

ã“ã®ã‚ˆã†ã«ã—ã¦ã¿ã‚‹ã¨ã€`video`ã‚½ãƒ¼ã‚¹ã¯åœ°å›³ã®ä»»æ„ã®å››è§’å½¢ã«å‹•ç”»ã‚’ã¯ã‚è¾¼ã‚“ã§ã„ã‚‹ã ã‘ã¨ã„ã†ã®ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã­ã€‚å…ˆç¨‹ã®ã‚µãƒ³ãƒ—ãƒ«ã§å‹•ç”»ãŒãã‚Œã„ã«è¡›æ˜Ÿç”»åƒã¨é‡ãªã£ã¦ã„ãŸã®ã¯ã€åº§æ¨™ãŒæ—¢çŸ¥ã®å‹•ç”»ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚


# ã¾ã¨ã‚

å‹•ç”»ã¯`video`ã‚½ãƒ¼ã‚¹ã‚’`raster`ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§æç”»ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚