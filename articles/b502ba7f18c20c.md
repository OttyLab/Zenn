---
title: "Azure Mapsã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½“é¨“ã™ã‚‹"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AzureMaps", "GIS", "JavaScript"]
published: true
publication_name: "mapbox_japan"
---

# ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã§ã¯[Azure Maps](https://azure.microsoft.com/ja-jp/products/azure-maps)ã«ãŠã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®æŒ™å‹•ã‚’ç¢ºèªã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯Azure Maps Web SDKã‚’ä½¿ã£ã¦åœ°å›³ã‚’è¡¨ç¤ºã—ã€ã©ã®ã‚ˆã†ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½¿ã†ã®ã‹ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚

å®Ÿã¯Azure Maps Web SDKã¯[Mapbox GL JSã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ä½œæˆ](https://www.mapbox.com/blog/azure-maps-adds-data-driven-styling-powered-by-mapbox-gl)ã•ã‚Œã¦ã„ã¾ã™ã€‚


# åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹

ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã®[Azure Maps ã‚’ä½¿ç”¨ã—ã¦å¯¾è©±å½¢å¼ã®æ¤œç´¢ãƒãƒƒãƒ—ã‚’ä½œæˆã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/azure-maps/quick-demo-map-app)ã‚’å‚è€ƒã«ã¾ãšã¯åœ°å›³ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```html
  <link href="https://atlas.microsoft.com/sdk/javascript/mapcontrol/3.0.0-preview.6/atlas.min.css" rel="stylesheet" />
  <script src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/3.0.0-preview.6/atlas.min.js"></script>
```

CSSã‚’è¨­å®šã—ã¾ã™ã€‚

```html
<style>
  body { margin: 0; padding: 0; }
  #map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
```

æ¬¡ã«åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ã‚’ä½œã‚Šã¾ã™ã€‚

```html
<div id="map"></div>
```

JavaScriptã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚`Map`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç¬¬ä¸€å¼•æ•°ã¯åœ°å›³ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ã®HTMLã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®æŒ‡å®šã€ç¬¬äºŒå¼•æ•°ãŒ`options`ã§ã™ã€‚[æ§˜ã€…ãªç¨®é¡ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.map?view=azure-maps-typescript-latest#azure-maps-control-atlas-map-constructor)ãŒè¨­å®šã§ãã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã“ã§ã¯[`CameraOptions`](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.cameraoptions?view=azure-maps-typescript-latest)ã®`center`ã¨`zoom`ã§åˆæœŸä½ç½®ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚ã¾ãŸ[`ServiceOptions`](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.serviceoptions?view=azure-maps-typescript-latest)ã®`authOptions`ã§ã‚­ãƒ¼ã®è¨­å®šã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚


```JavaScript
const map = new atlas.Map("map", {
  center: [-118.270293, 34.039737],
  zoom: 14,

  authOptions: {
    authType: "subscriptionKey",
    subscriptionKey: YOUR_API_KEY_HERE
  }
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/gOBwOmw)


# ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´

`Map`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã®`Options`ã§[`StyleOptions#style`](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.styleoptions?view=azure-maps-typescript-latest#azure-maps-control-atlas-styleoptions-style)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã¯[ã“ã“](https://learn.microsoft.com/en-us/azure/azure-maps/supported-map-styles)ã«ä¸€è¦§ãŒã‚ã‚Šã¾ã™ã€‚

å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚

```JavaScript
const map = new atlas.Map("map", {
  center: [-118.270293, 34.039737],
  zoom: 14,
  style: 'grayscale_light',

  authOptions: {
    authType: "subscriptionKey",
    subscriptionKey: YOUR_API_KEY_HERE
  }
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/XWxjWGL)


# ã‚¹ã‚¿ã‚¤ãƒ«ã®ç·¨é›†ï¼ˆã§ããªã„ï¼‰

Azure Mapsã§ã¯[ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«](https://learn.microsoft.com/ja-jp/azure/azure-maps/supported-map-styles)ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ãŒ**ã§ããªã„**ã‚ˆã†ã§ã™ã€‚[Azure Maps Creator](https://learn.microsoft.com/ja-jp/azure/azure-maps/how-to-manage-creator)ã¨ã„ã†é¡ä¼¼æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã§ç·¨é›†ã§ãã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã¯è‡ªåˆ†ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä½œæˆã—ãŸã‚¿ã‚¤ãƒ«ã®ã¿ã§ã™ã€‚

Azure Maps Creatorã®ç›®çš„ã¯å±‹å†…ãƒãƒƒãƒ—ï¼ˆã‚¤ãƒ³ãƒ‰ã‚¢ãƒãƒƒãƒ—ï¼‰ã‚’ä½œã‚‹ã“ã¨ã®ã‚ˆã†ã§ã™ã€‚[ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://learn.microsoft.com/ja-jp/azure/azure-maps/tutorial-creator-indoor-maps)ã«æ²¿ã£ã¦ä½œæ¥­ã™ã‚‹ã¨ä»¥ä¸‹ã®æ‰‹é †ã«ãªã‚Šã¾ã™ï¼ˆAzureãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§Creatorãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ã€‚

1. å±‹å†…ãƒãƒƒãƒ—ã®CADãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆAutoCAD DWGï¼‰ã€‚Drawingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã§ã€è¦ä»¶ã¯[ã“ã“](https://learn.microsoft.com/ja-jp/azure/azure-maps/drawing-requirements?pivots=drawing-package-v1)ã«å®šç¾©ã€‚
2. Data Upload APIã‚’ä½¿ç”¨ã—ã€Drawingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. Conversion APIã‚’ä½¿ç”¨ã—ã€Drawingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¤‰æ›
4. Dataset Create APIã‚’ä½¿ç”¨ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆ
5. Tilesets APIã‚’ä½¿ç”¨ã—ã€ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆã‚’ä½œæˆ

ã“ã‚Œã¯ã€Mapbox Studioã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆãƒ»ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆã¸ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã®ã¨é¡ä¼¼ã®ä½œæ¥­ã§ã™ã€‚ãŸã ã—ã€å…¨ã¦APIã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§å°‘ã—è¾›ã‹ã£ãŸã§ã™ã€‚

ã•ã¦ã€ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆãŒã§ããŸã‚‰[Azure Maps Style Editor](https://azure.github.io/Azure-Maps-Style-Editor)ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¹ã‚¿ã‚¤ãƒ«ã®ç·¨é›†ãŒã§ãã¾ã™ã€‚ã¡ãªã¿ã«ã€ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯[Maputnik](https://maputnik.github.io/)ã‚’[ãƒ™ãƒ¼ã‚¹ã«ä½œæˆ](https://github.com/azure/Azure-Maps-Style-Editor)ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

![MapTiler Cloud](/images/articles/b502ba7f18c20c/azure_style_editor_00.png)

ãŸã ã—ã€ã“ã“ã§ç·¨é›†ã§ãã‚‹ã®ã¯å…ˆç¨‹ä½œæˆã—ãŸã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã§ã™ã€‚ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ç·¨é›†ã§ãã¾ã›ã‚“ã€‚ç·¨é›†å¾Œã€ŒSaveã€ã€ŒUpload map configurationã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«`mapConfiguration`ã¨`styleAPIVersion`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ä½œæˆã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ãŒä½¿ç”¨ã§ãã¾ã™ã€‚

```JavaScript
atlas.setDomain(`us.atlas.microsoft.com`);

const map = new atlas.Map("map", {
  center: [-122.13315, 47.63637],
  zoom: 19,
  authOptions: {
    authType: "subscriptionKey",
    subscriptionKey: YOUR_API_KEY_HERE 
  },
  mapConfiguration:  CONFIGURATION_ID,
  styleAPIVersion: '2022-09-01-preview'
});
```

# ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«å¤‰æ›´

Mapã‚¯ãƒ©ã‚¹ã¯[`setStyle`ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.map?view=azure-maps-typescript-latest#azure-maps-control-atlas-map-setstyle)ã‚’å®Ÿè£…ã—ã¦ãŠã‚Šã€ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§å‹•çš„ã«ã‚¹ã‚¿ã‚¤ãƒ«ãŒå¤‰æ›´ã§ãã¾ã™ã€‚

ã¾ãšã€HTMLã§ã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚

```HTML
<select id="selector">
  <option value="road">road</option>
  <option value="grayscale_dark">grayscale dark</option>
</select>
```

JavaScriptã§ã¯ã‚»ãƒ¬ã‚¯ã‚¿é¸æŠæ™‚ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```JavaScript
const selector = document.getElementById("selector");

selector.addEventListener("change", (id) => {
  console.log(selector.value)
  map.setStyle({style: selector.value});
});
```

çµæœã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚

@[codepen](https://codepen.io/OttyLab/pen/oNaYWBp)

ã¾ãŸã€[StyleControl](https://learn.microsoft.com/ja-jp/javascript/api/azure-maps-control/atlas.control.stylecontrol?view=azure-maps-typescript-latest)ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€è‡ªåˆ†ã§ã‚»ãƒ¬ã‚¯ã‚¿ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä½¿ã„æ–¹ã®ä¾‹ã¯[ã‚µãƒ³ãƒ—ãƒ«é›†](https://samples.azuremaps.com/)ã®Update layer based on map styleã‚’ã”å‚ç…§ãã ã•ã„ã€‚


# ã¾ã¨ã‚

Azure Mapsã¯ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚¤ãƒ³ãƒ‰ã‚¢ãƒãƒƒãƒ—ã‚’CADãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç”Ÿæˆã§ãã‚‹ã¨ã„ã†ã‚¨ãƒƒã‚¸ã®åŠ¹ã„ãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã¾ãŸã€Azureãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã£ã¦ä½¿ã†ã®ãŒå°‘ã—æ–°é®®ã§ã—ãŸã€‚