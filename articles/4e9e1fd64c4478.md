---
title: "react-map-glã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è©¦ã—ã¦ã¿ã‚‹"
emoji: "ğŸ¥§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Mapbox", "React", "GIS", "JavaScript"]
published: true
publication_name: "mapbox_japan"
---

# ã¯ã˜ã‚ã«

[å‰å›](https://zenn.dev/ottylab/articles/348b8e229aaab5)ã«ç¶šãã€react-map-glã‚’è©¦ã—ã¾ã™ã€‚ä»Šå›ã¯GeoJSONãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚æ±äº¬é§…ã‚’è¡¨ç¾ã—ãŸãƒãƒªã‚´ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ä»¥ä¸‹ãŒãƒ‡ãƒ¢ã§ã™ã€‚[Safari](https://developer.stackblitz.com/platform/webcontainers/browser-support#safari)ã‚„[Firefox](https://developer.stackblitz.com/platform/webcontainers/browser-support#safari)ã‚’ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹æ–¹ã¯ãƒ‡ãƒ¢ãŒå®Ÿè¡Œã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚Chromeã§è¡¨ç¤ºã™ã‚‹ã‹ã€ https://stackblitz.com/edit/vitejs-vite-fi2kyj ã‚’ç›´æ¥ã”å‚ç…§ãã ã•ã„ã€‚

@[stackblitz](https://stackblitz.com/edit/vitejs-vite-fi2kyj?embed=1&view=preview)


# ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª

ä»¥ä¸‹ãŒä»Šå›ä½œæˆã—ãŸã‚³ãƒ¼ãƒ‰ã§ã™ã€‚`YOUR_MAPBOX_ACCESS_TOKEN`ã¯ã”è‡ªèº«ã®Mapboxã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

```JavaScript:App.jsx
import Map, { Source, Layer } from 'react-map-gl';
import 'mapbox-gl/dist/mapbox-gl.css';
import './App.css';

const TOKEN = 'YOUR_MAPBOX_ACCESS_TOKEN';
function App() {
  const TOKYO_STATION = {
    type: 'FeatureCollection',
    features: [
      {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'Polygon',
          coordinates: [
            [
              [139.76761579513547, 35.68415867760534],
              [139.76710081100464, 35.682973504734456],
              [139.76534128189087, 35.682712067172254],
              [139.76489067077637, 35.680533387506074],
              [139.76585626602173, 35.679609609368576],
              [139.76523399353027, 35.677796881563715],
              [139.7668218612671, 35.677448275341874],
              [139.7706413269043, 35.68347894825895],
              [139.76761579513547, 35.68415867760534],
            ],
          ],
        },
      },
    ],
  };

  return (
    <Map
      mapLib={import('mapbox-gl')}
      initialViewState={{
        longitude: 139.76711,
        latitude: 35.68074,
        zoom: 14.5,
      }}
      style={{ position: 'absolute', top: 0, bottom: 0, width: '100%' }}
      mapStyle="mapbox://styles/mapbox/streets-v12"
      mapboxAccessToken={TOKEN}
    >
      <Source id="tokyo_station" type="geojson" data={TOKYO_STATION}>
        <Layer
          id="tokyo_station"
          type="fill"
          paint={{ 'fill-color': '#00ff00' }}
        ></Layer>
      </Source>
    </Map>
  );
}

export default App;
```

## ã‚½ãƒ¼ã‚¹ã®ä½œæˆ
[Sourceã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://visgl.github.io/react-map-gl/docs/api-reference/source)ã¯[Mapã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ](https://github.com/visgl/react-map-gl/blob/v7.1.7/src/components/source.ts#L99)ã‚’å–å¾—ã—ã¦ã„ã‚‹ã®ã§ã€Mapã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ä½œæˆã—ã¾ã™ã€‚ã¾ãŸã€[`Map#addSource`](https://docs.mapbox.com/mapbox-gl-js/api/map/#map#addsource)ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ãŒã€å¼•æ•°ã®`options`ã¯`props`ãŒãã®ã¾ã¾å±•é–‹ã•ã‚Œã¾ã™ã€‚

https://github.com/visgl/react-map-gl/blob/v7.1.7/src/components/source.ts#L32-L36

ãã“ã§ã€ã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã«åˆã‚ã›ã¦`data`ãªã©ã‚’`props`ã¨ã—ã¦æŒ‡å®šã—ã¾ã™ã€‚
```JavaScript
<Source id="tokyo_station" type="geojson" data={TOKYO_STATION}>
```

## ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½œæˆ
[Layerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://visgl.github.io/react-map-gl/docs/api-reference/layer)ã¯[Mapã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ](https://github.com/visgl/react-map-gl/blob/v7.1.7/src/components/layer.ts#L92)ã‚’å–å¾—ã—ã¦ã„ã‚‹ã®ã§ã€Mapã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ä½œæˆã—ã¾ã™ã€‚ã¾ãŸã€[`Map#addLayer`](https://docs.mapbox.com/mapbox-gl-js/api/map/#map#addlayer)ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¾ã™ãŒã€å¼•æ•°ã®`options`ã¯`props`ãŒãã®ã¾ã¾å±•é–‹ã•ã‚Œã¾ã™ã€‚

https://github.com/visgl/react-map-gl/blob/v7.1.7/src/components/layer.ts#L79-L83

ãã“ã§ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç¨®é¡ã«åˆã‚ã›ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«`props`ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```JavaScript
<Layer
  id="tokyo_station"
  type="fill"
  paint={{ 'fill-color': '#00ff00' }}
>
```

ã¾ãŸã€Sourceã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§[ã‚½ãƒ¼ã‚¹IDã‚’propã¨ã—ã¦è¿½åŠ ã—ã¦ãã‚Œã¦ã„ã‚‹](https://github.com/visgl/react-map-gl/blob/v7.1.7/src/components/source.ts#L151)ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€Layerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Sourceã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ä½œæˆã—ãŸå ´åˆã«ã¯ã‚½ãƒ¼ã‚¹IDã¯æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚


# ã¾ã¨ã‚
ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¿½åŠ ã‚‚ç›´æ„Ÿçš„ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
